(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-416332c6"],{3652:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-container"},[e("div",{staticClass:"main-title"},[t._v("NS分组管理")]),e("div",{staticClass:"header-container"},[e("div",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加NS分组")]),e("el-dialog",{attrs:{title:"添加NS分组",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{ref:"userFormList",attrs:{model:t.userForm,rules:t.rules}},[e("el-form-item",{attrs:{label:"分组名称：","label-width":t.formLabelWidth,prop:"name"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.userForm.name,callback:function(e){t.$set(t.userForm,"name",e)},expression:"userForm.name"}})],1),e("el-form-item",{attrs:{label:"NS地址：","label-width":t.formLabelWidth,prop:"ns"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.userForm.ns,callback:function(e){t.$set(t.userForm,"ns",e)},expression:"userForm.ns"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("确 定")])],1)],1)],1)]),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"small","header-cell-style":t.fun,stripe:"",data:t.userList,"tooltip-effect":"dark"}},[e("el-table-column",{attrs:{width:"30"}}),e("el-table-column",{attrs:{prop:"name",label:"NS分组名称",width:"200"}}),e("el-table-column",{attrs:{prop:"ns",label:"NS地址",width:"680"}}),e("el-table-column",{attrs:{prop:"state","show-overflow-tooltip":"",label:"状态",width:"130"},scopedSlots:t._u([{key:"default",fn:function(s){return[0==s.row.state?e("el-tag",{attrs:{type:"success"}},[t._v("正常")]):t._e(),1==s.row.state?e("el-tag",{attrs:{type:"warning"}},[t._v("停用")]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"rtime",label:""}}),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(s){return[0==s.row.id?e("i",{staticClass:"el-icon-lock"}):e("div",[e("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text"},on:{click:function(e){return t.update(s.row.id)}}},[t._v("修改")]),e("el-dialog",{attrs:{title:"修改NS分组",visible:t.updateFormVisible},on:{"update:visible":function(e){t.updateFormVisible=e}}},[e("el-form",{ref:"updateUserFormList",attrs:{model:t.updateList,rules:t.updateFormRules}},[e("el-form-item",{attrs:{label:"名称：","label-width":t.formLabelWidth,prop:"name"}},[t._v(t._s(t.updateList.name))]),e("el-form-item",{attrs:{label:"NS地址：","label-width":t.formLabelWidth,prop:"ns"}},[e("el-input",{staticClass:"ns",attrs:{autocomplete:"off"},model:{value:t.updateList.ns,callback:function(e){t.$set(t.updateList,"ns",e)},expression:"updateList.ns"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.updateFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.del(s.row.id)}}},[t._v("删除")])],1)]}}])})],1),e("div",{staticClass:"footer-page",staticStyle:{"margin-top":"20px","text-align":"right"}},[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,30,50,100],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.count,background:"","pager-count":5},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),e("el-alert",{staticClass:"alert-container",attrs:{title:"备注说明",description:"NS分组是指对NS地址和解析分组，对应用类型分类或机器资源进行分组等，需在创建用户帐号时指定所使用分组"}})],1)},r=[],i={name:"",components:{},data(){return{rules:{name:[{required:!0,message:"请输入分组名称",trigger:"blur"}],ns:[{required:!0,message:"请输入NS地址",trigger:"blur"}]},updateFormRules:{},userList:[],currentPage:1,formLabelWidth:"120px",userForm:{name:"",ns:"",nc:"0"},pw:"",dialogFormVisible:!1,updateFormVisible:!1,count:0,pagesize:10,updateList:{},dialogInfo:!1}},computed:{},watch:{},methods:{addUser(){this.dialogFormVisible=!1,this.$request({url:"/domain/ns/add",params:this.userForm}).then(t=>{this.getUserList(),0==t.data.rec?(this.$refs.userFormList.resetFields(),this.$message.success(t.data.msg)):this.$message.error(t.data.msg)})},getUserList(){this.$request({url:"/domain/ns/list",params:{page:this.currentPage,pagesize:this.pagesize}}).then(t=>{0==t.data.rec?(this.userList=t.data.data.list,this.count=t.data.data.count):this.$message.error(t.data.msg)})},fun({columnIndex:t}){return 5==t?{"text-align":"center",background:"#0164F6",color:"#fff",height:"50px","padding-right":"40px"}:0==t?{height:"50px","padding-left":"40px",background:"#0164F6",color:"#fff"}:{background:"#0164F6",color:"#fff",height:"50px"}},del(t){this.$confirm("是否删除该分组?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request({url:"/domain/ns/del",params:{id:t}}).then(t=>{0==t.data.rec?(this.$message.success(t.data.msg),this.getUserList()):this.$message.error(t.data.msg)})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},update(t){this.updateFormVisible=!0,this.$request({url:"/domain/ns/view",params:{id:t}}).then(t=>{0==t.data.rec?this.updateList=t.data.data:this.$message.error(t.data.msg)})},submitForm(){this.$request({url:"/domain/ns/add",params:this.updateList}).then(t=>{0==t.data.rec?(this.$message.success(t.data.msg),this.updateFormVisible=!1,this.getUserList()):this.$message.error(t.data.msg)})},handleSizeChange(t){this.pagesize=t,this.getUserList()},handleCurrentChange(t){this.currentPage=t,this.getUserList()}},created(){this.getUserList()},mounted(){}},l=i,o=(s("57bf"),s("2877")),n=Object(o["a"])(l,a,r,!1,null,null,null);e["default"]=n.exports},4262:function(t,e,s){},"57bf":function(t,e,s){"use strict";s("4262")}}]);