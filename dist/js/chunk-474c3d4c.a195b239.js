(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-474c3d4c"],{"835a":function(t,e,l){"use strict";l("8dcd")},"8dcd":function(t,e,l){},b64c:function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{},[e("div",{staticClass:"main-title"},[t._v("最新查询请求记录(100条)")]),e("div",{staticClass:"header-container",staticStyle:{"margin-bottom":"20px"}},[1==t.gid?e("el-select",{attrs:{placeholder:"选择节点",filterable:"","allow-create":""},on:{change:t.selectNid},model:{value:t.nid,callback:function(e){t.nid=e},expression:"nid"}},[e("el-option",{attrs:{label:"全部",value:""}}),t._l(t.nidlist,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2):t._e(),e("el-select",{attrs:{placeholder:"选择域名",filterable:"","allow-create":""},on:{change:t.selectDom},model:{value:t.domain,callback:function(e){t.domain=e},expression:"domain"}},[e("el-option",{attrs:{label:"全部(域名)",value:""}}),t._l(t.domlist,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}))],2)],1),e("el-table",{ref:"multipleTable",attrs:{size:"small","header-cell-style":t.fun,stripe:"",data:t.logdata,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{prop:"",label:"",width:"30"}}),e("el-table-column",{attrs:{prop:"host","show-overflow-tooltip":"",label:"主机名",width:"130"}}),e("el-table-column",{attrs:{prop:"domain","show-overflow-tooltip":"",label:"域名",width:"280"}}),e("el-table-column",{attrs:{prop:"qt","show-overflow-tooltip":"",label:"类型",width:"130"}}),e("el-table-column",{attrs:{prop:"cip","show-overflow-tooltip":"",label:"客户IP",width:"260"}}),e("el-table-column",{attrs:{prop:"ty","show-overflow-tooltip":"",label:"域内",width:"120"},scopedSlots:t._u([{key:"default",fn:function(l){return[0==l.row.ty?e("el-tag",{attrs:{type:"success"}},[t._v("是")]):e("el-tag",{attrs:{type:"warning"}},[t._v("否")])]}}])}),e("el-table-column",{attrs:{prop:"ts",label:"时间"}})],1),e("div",{staticClass:"footer-page",staticStyle:{"margin-top":"20px"}})],1)},o=[],i=(l("14d9"),{name:"",components:{},data(){return{pagesize:10,count:0,loginData:[],multipleSelection:[],currentPage:1,formLabelWidth:"120px",form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},gid:0,nid:"",domain:"",nidlist:[],domlist:[],logdata:[],dialogFormVisible:!1,otimer:null}},computed:{},watch:{},methods:{getNidDom(){this.$request({url:"/domain/flow/nid/dom",params:{}}).then(t=>{0==t.data.rec?(this.domlist=t.data.data.dom,this.nidlist=t.data.data.nid):this.$message.error(t.data.msg)})},selectNid(){this.getlog()},selectDom(){this.getlog()},getlog(){""==this.domain&&0==this.gid||(this.$request({url:"/domain/newlog",params:{nid:this.nid,domain:this.domain}}).then(t=>{0==t.data.rec?this.logdata=t.data.data:this.$message.error(t.data.msg)}),this.otimer=setInterval(()=>{this.$request({url:"/domain/newlog",params:{nid:this.nid,domain:this.domain}}).then(t=>{0==t.data.rec?this.logdata=t.data.data:clearInterval(this.otimer)})},5e3))},toggleAll(){this.$refs.multipleTable.toggleAllSelection()},fun({columnIndex:t}){return 8!==t&&0!=t?{background:"#0164F6",color:"#fff",height:"40px"}:0==t?{background:"#0164F6",color:"#fff","padding-left":"10px",height:"40px"}:4==t?{"text-align":"right",background:"#0164F6",color:"#fff","padding-right":"10px",height:"40px"}:void 0},toggleSelection(t){t?t.forEach(t=>{this.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange(t){this.multipleSelection=t},Towatch(){this.$router.push("/domin/list/watch")},Torecord(){this.$router.push("/domin/list/record")},Tocount(){this.$router.push("/domin/list/count")},handleSizeChange(t){this.pagesize=t,this.getlog()},handleCurrentChange(t){this.currentPage=t,this.getlog()}},created(){this.gid=localStorage.getItem("gid"),this.nid=this.$route.query.nid,this.getNidDom(),this.getlog()},mounted(){this.$once("hook:beforeDestroy",()=>{clearInterval(this.otimer)})}}),n=i,s=(l("835a"),l("2877")),r=Object(s["a"])(n,a,o,!1,null,"b7b892ac",null);e["default"]=r.exports}}]);