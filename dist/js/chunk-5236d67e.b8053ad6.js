(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5236d67e"],{"13d5":function(t,e,a){"use strict";var s=a("23e7"),l=a("d58f").left,i=a("a640"),r=a("2d00"),o=a("605d"),n=!o&&r>79&&r<83,c=n||!i("reduce");s({target:"Array",proto:!0,forced:c},{reduce:function(t){var e=arguments.length;return l(this,t,e,e>1?arguments[1]:void 0)}})},"605d":function(t,e,a){"use strict";var s=a("da84"),l=a("c6b6");t.exports="process"===l(s.process)},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){return 1},1)}))}},be69:function(t,e,a){},c92a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{},[e("div",{staticClass:"control"},[t._v("批量操作")]),e("el-card",{staticClass:"box-card"},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"添加域名",name:"first"}},[e("div",{staticClass:"domin-list"},[e("span",{staticClass:"same"},[t._v("添加域名")]),e("el-input",{staticClass:"area",attrs:{type:"textarea",rows:8,placeholder:"请输入域名，每行一个"},model:{value:t.form1.big,callback:function(e){t.$set(t.form1,"big",e)},expression:"form1.big"}}),e("span",{staticClass:"hui"},[t._v("每行一个域名")])],1),e("div",{staticClass:"domin-list mid"},[e("span",{staticClass:"same"},[t._v("加入分组")]),e("el-select",{attrs:{placeholder:"选择分组",filterable:"","allow-create":""},model:{value:t.form1.gid,callback:function(e){t.$set(t.form1,"gid",e)},expression:"form1.gid"}},[e("el-option",{attrs:{label:"默认",value:"0"}}),t._l(t.groupList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.id}})}))],2),e("span",{staticClass:"hui"},[t._v("选择加入到分组")])],1),1==t.gid1?e("div",{staticClass:"domin-list mid"},[e("span",{staticClass:"same"},[t._v("指定用户")]),e("el-select",{attrs:{placeholder:"选择用户",filterable:"","allow-create":""},model:{value:t.form1.uid,callback:function(e){t.$set(t.form1,"uid",e)},expression:"form1.uid"}},[e("el-option",{attrs:{label:"默认",value:"0"}}),t._l(t.userList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.user,value:t.id}})}))],2),e("span",{staticClass:"hui"},[t._v("指定添加域名的所属用户")])],1):t._e(),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"opsity same"},[t._v("加入分组")]),e("el-button",{staticClass:"bottom-sub",attrs:{type:"primary"},on:{click:t.submit1}},[t._v("提交")])],1)]),e("el-tab-pane",{attrs:{label:"删除域名",name:"firstdel"}},[e("div",{staticClass:"domin-list"},[e("span",{staticClass:"same"},[t._v("删除域名")]),e("el-input",{staticClass:"area",attrs:{type:"textarea",rows:11,placeholder:"请输入域名，每行一个"},model:{value:t.formdel.big,callback:function(e){t.$set(t.formdel,"big",e)},expression:"formdel.big"}}),e("span",{staticClass:"hui"},[t._v("每行一个域名")])],1),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"opsity same"}),e("el-button",{staticClass:"bottom-sub",attrs:{type:"primary"},on:{click:t.submitdel}},[t._v("提交")])],1)]),e("el-tab-pane",{attrs:{label:"添加解析",name:"second"}},[e("div",{staticClass:"domin-list"},[e("span",{staticClass:"same"},[t._v("目标域名")]),e("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入域名，每行一个"},model:{value:t.tetx,callback:function(e){t.tetx=e},expression:"tetx"}}),e("span",{staticClass:"hui"},[t._v("每行1个域名，若不存在则自动添加")])],1),e("div",{staticClass:"domin-list bottom"},[e("span",{staticClass:"same"},[t._v("解析记录")]),e("div",[e("div",{staticStyle:{display:"flex","align-items":"flex-end"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{size:"small",data:t.form2,border:""}},[e("el-table-column",{attrs:{label:"主机记录",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{placeholder:"主机记录"},model:{value:a.row.host,callback:function(e){t.$set(a.row,"host",e)},expression:"scope.row.host"}})]}}])}),e("el-table-column",{attrs:{label:"类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-select",{staticStyle:{width:"auto",margin:"0"},attrs:{placeholder:"请选择"},model:{value:a.row.sort,callback:function(e){t.$set(a.row,"sort",e)},expression:"scope.row.sort"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),e("el-table-column",{attrs:{width:"120","show-overflow-tooltip":"",label:"线路"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-cascader",{attrs:{"show-all-levels":!1,options:t.region,props:{expandTrigger:"hover",checkStrictly:!0}},model:{value:a.row.region,callback:function(e){t.$set(a.row,"region",e)},expression:"scope.row.region"}})]}}])}),e("el-table-column",{attrs:{label:"记录值",width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{placeholder:"记录值"},model:{value:a.row.val,callback:function(e){t.$set(a.row,"val",e)},expression:"scope.row.val"}})]}}])}),e("el-table-column",{attrs:{label:"MX"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{model:{value:a.row.pre,callback:function(e){t.$set(a.row,"pre",e)},expression:"scope.row.pre"}})]}}])}),e("el-table-column",{attrs:{label:"TTL",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{model:{value:a.row.ttl,callback:function(e){t.$set(a.row,"ttl",e)},expression:"scope.row.ttl"}})]}}])})],1),e("i",{staticClass:"add-btn-1",on:{click:t.addRecord}},[t._v("+")])],1),e("div",{staticStyle:{"margin-top":"30px"}},[e("el-checkbox",{model:{value:t.form2.cla,callback:function(e){t.$set(t.form2,"cla",e)},expression:"form2.cla"}},[t._v("清空原有记录")]),e("span",{staticStyle:{"margin-left":"20px",color:"red"}},[t._v("注意 : 勾选后，目标域名原有解析记录将被清空")])],1)])]),1==t.gid1?e("div",{staticClass:"domin-list mid"},[e("span",{staticClass:"same"},[t._v("指定用户")]),e("el-select",{attrs:{placeholder:"选择用户",filterable:"","allow-create":""},model:{value:t.form1.uid,callback:function(e){t.$set(t.form1,"uid",e)},expression:"form1.uid"}},[e("el-option",{attrs:{label:"默认",value:"0"}}),t._l(t.userList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.user,value:t.id}})}))],2),e("span",{staticClass:"hui"},[t._v("指定添加域名解析的所属用户")])],1):t._e(),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"opsity same"},[t._v("加入分组")]),e("el-button",{staticClass:"bottom-sub",attrs:{type:"primary"},on:{click:t.submit2}},[t._v("提交")])],1)]),e("el-tab-pane",{attrs:{label:"修改解析",name:"fourt"}},[e("div",{staticClass:"domin-list"},[e("span",{staticClass:"same"},[t._v("目标域名")]),e("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入域名，每行一个"},model:{value:t.updateForm.domain,callback:function(e){t.$set(t.updateForm,"domain",e)},expression:"updateForm.domain"}}),e("span",{staticClass:"hui",staticStyle:{position:"absolute",top:"30px",left:"476px"}},[t._v("每行1个域名")])],1),e("div",{staticClass:"domin-list",staticStyle:{"margin-top":"10px"}},[e("span",{staticClass:"opsity same"},[t._v("加入分组")]),e("el-select",{attrs:{clearable:"",placeholder:"从分组导入域名",filterable:"","allow-create":""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.groupList,(function(a,s){return e("el-option",{key:s,attrs:{label:a.name,value:a.id},nativeOn:{click:function(e){return t.sel(a.id)}}})})),1)],1),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"same"},[t._v("检索条件")]),e("el-input",{staticStyle:{width:"165px",margin:"0 20px"},attrs:{placeholder:"主机名(选填)"},model:{value:t.updateForm.chost,callback:function(e){t.$set(t.updateForm,"chost",e)},expression:"updateForm.chost"}}),e("el-input",{staticStyle:{width:"165px","margin-right":"20px"},attrs:{placeholder:"记录值(选填)"},model:{value:t.updateForm.cval,callback:function(e){t.$set(t.updateForm,"cval",e)},expression:"updateForm.cval"}}),e("span",{staticClass:"hui"},[t._v("检索目标域名中满足条件的解析记录。")])],1),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"opsity same"},[t._v("检索条件")]),e("el-select",{staticStyle:{width:"165px"},attrs:{clearable:""},model:{value:t.updateForm.qt,callback:function(e){t.$set(t.updateForm,"qt",e)},expression:"updateForm.qt"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-cascader",{staticStyle:{width:"165px"},attrs:{"show-all-levels":!1,options:t.region,props:{expandTrigger:"hover",checkStrictly:!0}},model:{value:t.updateForm.view,callback:function(e){t.$set(t.updateForm,"view",e)},expression:"updateForm.view"}})],1),e("div",{staticClass:"domin-list"},[e("span",[t._v("修改后的记录")]),e("el-input",{staticStyle:{width:"165px",margin:"0 20px"},attrs:{placeholder:"新记录值"},model:{value:t.updateForm.nval,callback:function(e){t.$set(t.updateForm,"nval",e)},expression:"updateForm.nval"}}),e("el-select",{staticStyle:{width:"165px","margin-left":"0"},attrs:{clearable:""},model:{value:t.updateForm.nqt,callback:function(e){t.$set(t.updateForm,"nqt",e)},expression:"updateForm.nqt"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("span",{staticClass:"hui"},[t._v("将检索出的解析记录修改为指定的值。")])],1),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"opsity same"},[t._v("加入分组")]),e("el-button",{staticClass:"bottom-sub",attrs:{type:"primary"},on:{click:t.Update}},[t._v("提交")])],1)]),e("el-tab-pane",{attrs:{label:"删除/启用/暂停",name:"four"}},[e("div",{staticClass:"domin-list"},[e("span",{staticClass:"same"},[t._v("目标域名")]),e("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入域名，每行一个"},model:{value:t.updateForm1.domain,callback:function(e){t.$set(t.updateForm1,"domain",e)},expression:"updateForm1.domain"}}),e("span",{staticClass:"hui",staticStyle:{position:"absolute",top:"30px",left:"476px"}},[t._v("每行1个域名")])],1),e("div",{staticClass:"domin-list",staticStyle:{"margin-top":"10px"}},[e("span",{staticClass:"opsity same"},[t._v("加入分组")]),e("el-select",{attrs:{clearable:"",placeholder:"从分组导入域名",filterable:"","allow-create":""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.groupList,(function(a,s){return e("el-option",{key:s,attrs:{label:a.name,value:a.id},nativeOn:{click:function(e){return t.sel1(a.id)}}})})),1)],1),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"same"},[t._v("检索条件")]),e("el-input",{staticStyle:{width:"165px",margin:"0 20px"},attrs:{placeholder:"主机名(选填)"},model:{value:t.updateForm1.chost,callback:function(e){t.$set(t.updateForm1,"chost",e)},expression:"updateForm1.chost"}}),e("el-input",{staticStyle:{width:"165px","margin-right":"20px"},attrs:{placeholder:"记录值(选填)"},model:{value:t.updateForm1.cval,callback:function(e){t.$set(t.updateForm1,"cval",e)},expression:"updateForm1.cval"}}),e("span",{staticClass:"hui"},[t._v("检索目标域名中满足条件的解析记录。")])],1),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"opsity same"},[t._v("检索条件")]),e("el-select",{staticStyle:{width:"165px"},attrs:{clearable:""},model:{value:t.updateForm1.qt,callback:function(e){t.$set(t.updateForm1,"qt",e)},expression:"updateForm1.qt"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-cascader",{staticStyle:{width:"165px"},attrs:{"show-all-levels":!1,options:t.region,props:{expandTrigger:"hover",checkStrictly:!0}},model:{value:t.updateForm1.view,callback:function(e){t.$set(t.updateForm1,"view",e)},expression:"updateForm1.view"}})],1),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"same",staticStyle:{"margin-right":"20px"}},[t._v("操作")]),e("el-radio-group",{staticStyle:{"margin-right":"153px"},model:{value:t.updateForm1.act,callback:function(e){t.$set(t.updateForm1,"act",e)},expression:"updateForm1.act"}},[e("el-radio",{attrs:{label:1}},[t._v("开启")]),e("el-radio",{attrs:{label:2}},[t._v("暂停")]),e("el-radio",{attrs:{label:3}},[t._v("删除")])],1),e("span",{staticClass:"hui"},[t._v("对检索出的解析记录进行指定操作。")])],1),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"opsity same"},[t._v("加入分组")]),e("el-button",{staticClass:"bottom-sub",attrs:{type:"primary"},on:{click:t.update1}},[t._v("提交")])],1)]),e("el-tab-pane",{attrs:{label:"批量添加解析或导入",name:"five"}},[e("div",{staticClass:"domin-list"},[e("span",{staticClass:"same"},[t._v("域名记录")]),e("el-input",{staticClass:"area",attrs:{type:"textarea",rows:10,placeholder:"请输入解析记录，每行一条，用空格分开"},model:{value:t.form5.record,callback:function(e){t.$set(t.form5,"record",e)},expression:"form5.record"}}),e("span",{staticClass:"hui"},[t._v("格式：域名 主机名 类型 记录值 TTL MX 如:dnsbm.com www A 127.0.0.1 600 1")])],1),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"same"},[t._v("分隔符")]),e("el-input",{staticStyle:{width:"165px",margin:"0 20px"},attrs:{placeholder:"指定分隔符"},model:{value:t.form5.sep,callback:function(e){t.$set(t.form5,"sep",e)},expression:"form5.sep"}}),e("span",{staticClass:"hui"},[t._v('默认分隔符为空格，可指定分隔符，如"|"，默认请留空')])],1),e("div",{staticClass:"domin-list"},[e("span",{staticClass:"opsity same"}),e("el-button",{staticClass:"bottom-sub",attrs:{type:"primary"},on:{click:t.submit5}},[t._v("确定提交")])],1)]),e("el-tab-pane",{attrs:{label:"文件导入",name:"fnimport"}},[e("el-alert",{staticClass:"desc-import",attrs:{title:"说明",description:"该导入文件只限于使用本系统导出的域名及记录文件"}}),e("el-form",{ref:"formImp",attrs:{model:t.formImp,rules:t.uploadImpRules}},[e("el-form-item",{attrs:{label:"文件导入",prop:"fn"}},[""==t.formImp.fn?e("el-upload",{ref:"formImpfn",attrs:{"list-type":"text",limit:2,action:"","http-request":t.uploadImp}},[e("div",{staticClass:"btn-upload"},[t._v("+")])]):e("div",[e("img",{staticStyle:{width:"150px",height:"150px","margin-right":"10px"},attrs:{src:t.formImp.fn,alt:""}})])],1),e("el-form-item",[e("el-button",{staticStyle:{width:"75px",margin:"10px 90px"},attrs:{type:"primary"},on:{click:t.submitImp}},[t._v("确定")])],1)],1)],1)],1)],1)],1)},l=[],i=(a("14d9"),a("13d5"),{name:"",components:{},data(){return{updateForm:{domain:"",chost:"",cval:"",qt:"A",view:9e3,nval:"",nqt:"A"},updateForm1:{act:"",domain:"",chost:"",cval:"",qt:"A",view:9e3},options:[{value:"A",label:"A"},{value:"NS",label:"NS"},{value:"CNAME",label:"CNAME"},{value:"MX",label:"MX"},{value:"TXT",label:"TXT"},{value:"AAAA",label:"AAAA"},{value:"SRV",label:"SRV"},{value:"CAA",label:"CAA"}],groupList:[],userList:[],form1:{big:"",gid:"",uid:""},formdel:{big:""},form2:[{host:"",sort:"A",region:9e3,val:"",pre:"1",ttl:localStorage.getItem("ttl"),cla:1,uid:""}],form5:{record:"",sep:""},formImp:{fn:""},uploadImpRules:{fn:[{required:!0,message:"请输选择记录文件",trigger:"blur"}]},multipleSelection:[],currentPage4:4,tetx:"",value:"",activeName:"first",inner:1,checked:0,fic:0,fileDr:[],radio:"1",region:[],gid1:""}},computed:{},watch:{},methods:{uploadImp(t){this.fileDr.push(t),this.fic++},submitImp(){if(1==this.fic){var t=new FormData;t.append("fn",this.fileDr[0].file),this.$request({url:"/domain/record/import",data:t,method:"post",headers:{"Content-Type":"multipart/form-data"}}).then(t=>{0==t.data.rec?this.$message.success(t.data.msg):(this.$message.error(t.data.msg),this.$refs.formImpfn.clearFiles(),this.fic=0)})}else this.$message.error("请选择文件")},addRecord(){var t={host:"",sort:"A",region:9e3,val:"",pre:"1",ttl:localStorage.getItem("ttl"),checked:!0};this.form2.push(t)},sel(t){this.$request({url:"/domain/group/domain",params:{id:t}}).then(t=>{var e=t.data.data.list.map(t=>t.name);this.updateForm.domain=e.toString().replace(/,/g,"\n")})},sel1(t){this.$request({url:"/domain/group/domain",params:{id:t}}).then(t=>{var e=t.data.data.list.map(t=>t.name);this.updateForm1.domain=e.toString().replace(/,/g,"\n")})},update1(){this.updateForm1.domain=this.updateForm1.domain.replace(/\s+/g,","),this.updateForm1.view=this.updateForm1.view.toString(),this.$request({url:"/domain/batch/act",params:this.updateForm1}).then(t=>{0==t.data.rec?this.$message.success(t.data.msg):this.$message.error(t.data.msg)})},Update(){this.updateForm.domain=this.updateForm.domain.replace(/\s+/g,","),this.updateForm.view=this.updateForm.view.toString(),this.$request({url:"/domain/batch/edit/record",params:this.updateForm}).then(t=>{0==t.data.rec?this.$message.success(t.data.msg):this.$message.error(t.data.msg)})},getGroupList(){this.$request({url:"/domain/group/list"}).then(t=>{0==t.data.rec?this.groupList=t.data.data.list:this.$message.error(t.data.msg)})},getUser(){this.$request({url:"/user/list/short"}).then(t=>{0==t.data.rec?this.userList=t.data.data.list:this.$message.error(t.data.msg)})},submit2(){var t=this.form2.reduce((t,e)=>t+e.host+","+e.sort+","+e.val+","+e.region+","+e.ttl+","+e.pre+";","");this.$request({url:"/domain/record/batch",params:{domain:this.tetx.replace(/\s+/g,","),record:t,cla:this.form2.cla,uid:this.form2.uid}}).then(t=>{0==t.data.rec?this.$message.success(t.data.msg):this.$message.error(t.data.msg)})},submit1(){this.$request({url:"/domain/batch",params:{domain:this.form1.big.replace(/\s+/g,","),act:"add",gid:this.form1.gid,uid:this.form1.uid}}).then(t=>{0==t.data.rec?this.$message.success(t.data.msg):this.$message.error(t.data.msg)})},submitdel(){this.$request({url:"/domain/batch",params:{domain:this.formdel.big.replace(/\s+/g,","),act:"del"}}).then(t=>{0==t.data.rec?this.$message.success(t.data.msg):this.$message.error(t.data.msg)})},submit5(){this.$request({url:"/domain/batch/add/record",params:{record:this.form5.record.replace(/\n/g,";"),sep:this.form5.sep}}).then(t=>{0==t.data.rec?this.$message.success(t.data.msg):this.$message.error(t.data.msg)})},toggleAll(){this.$refs.multipleTable.toggleAllSelection()},toggleSelection(t){t?t.forEach(t=>{this.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange(t){this.multipleSelection=t},handleClick(t,e){},handleSizeChange(t){},handleCurrentChange(t){}},beforeRouteEnter(t,e,a){t.query.record?a(t=>{t.activeName="second"}):t.query.add?a(t=>{t.activeName="first"}):t.query.update?a(t=>{t.activeName="fourt"}):t.query.del?a(t=>{t.activeName="four"}):t.query.addr?a(t=>{t.activeName="five"}):t.query.deld?a(t=>{t.activeName="firstdel"}):a(t=>{t.activeName="first"})},created(){this.gid1=localStorage.getItem("gid"),1==this.gid1&&this.getUser(),this.getGroupList(),this.$request({url:"/domain/region"}).then(t=>{0==t.data.rec?this.region=JSON.parse(t.data.data):this.$message.error(t.data.msg)})},mounted(){}}),r=i,o=(a("ffe6"),a("2877")),n=Object(o["a"])(r,s,l,!1,null,"e27c2910",null);e["default"]=n.exports},d58f:function(t,e,a){"use strict";var s=a("59ed"),l=a("7b0b"),i=a("44ad"),r=a("07fa"),o=TypeError,n=function(t){return function(e,a,n,c){s(a);var d=l(e),u=i(d),p=r(d),m=t?p-1:0,v=t?-1:1;if(n<2)while(1){if(m in u){c=u[m],m+=v;break}if(m+=v,t?m<0:p<=m)throw new o("Reduce of empty array with no initial value")}for(;t?m>=0:p>m;m+=v)m in u&&(c=a(c,u[m],m,d));return c}};t.exports={left:n(!1),right:n(!0)}},ffe6:function(t,e,a){"use strict";a("be69")}}]);