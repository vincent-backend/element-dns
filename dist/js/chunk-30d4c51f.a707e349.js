(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30d4c51f"],{"4bb8":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{},[t("div",{staticClass:"main-title"},[e._v("套餐列表")]),t("el-card",[t("div",{staticClass:"row1"},[t("div",[t("el-button",{staticClass:"space add-device",on:{click:function(t){e.addDialogFormVisible=!0}}},[e._v("添加套餐")]),t("el-dialog",{attrs:{title:"添加套餐",visible:e.addDialogFormVisible,top:"1vh"},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[t("el-form",{ref:"addDevice",attrs:{model:e.form,rules:e.deviceRules}},[t("el-form-item",{attrs:{label:"名称：","label-width":e.formLabelWidth,prop:"name"}},[t("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"套餐名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"线路：","label-width":e.formLabelWidth,prop:"lid"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.lid,callback:function(t){e.$set(e.form,"lid",t)},expression:"form.lid"}},e._l(e.form.lidlist,(function(e,i){return t("el-option",{key:i,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"使用时间：","label-width":e.formLabelWidth,prop:"ut"}},[t("el-select",{staticStyle:{width:"80px",margin:"0 2px"},attrs:{placeholder:"请选择"},on:{change:e.utChange},model:{value:e.form.ut,callback:function(t){e.$set(e.form,"ut",t)},expression:"form.ut"}},[t("el-option",{attrs:{label:"月",value:"m"}},[e._v("月")]),t("el-option",{attrs:{label:"年",value:"y"}},[e._v("年")]),t("el-option",{attrs:{label:"无限制",value:"ev"}},[e._v("无限制")])],1),1==e.un?t("el-input",{staticStyle:{width:"80px",margin:"0 10px"},attrs:{autocomplete:"off",placeholder:"使用时间"},model:{value:e.form.un,callback:function(t){e.$set(e.form,"un",t)},expression:"form.un"}}):e._e()],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addDevice()}}},[e._v("确 定")])],1)],1),t("span",[e._v("  ")])],1),t("div",[t("el-input",{staticClass:"space",attrs:{placeholder:"名称"}}),t("el-button",{staticStyle:{padding:"10px 15px",color:"#0164F6",border:"1px solid #0164F6"},attrs:{plain:""}},[e._v("搜索")])],1)])]),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"small","header-cell-style":e.fun,stripe:"",data:e.NodeList,"tooltip-effect":"dark"}},[t("el-table-column",{attrs:{prop:"",label:"",width:"30"}}),t("el-table-column",{attrs:{prop:"name",label:"名称",width:"160"}}),t("el-table-column",{attrs:{prop:"lid",label:"线路ID",width:"100"}}),t("el-table-column",{attrs:{prop:"uts",label:"使用时间",width:"120"}}),t("el-table-column",{attrs:{prop:"rtime",label:"添加时间","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"note",label:"备注",width:"120"}}),t("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.updateShow(i.row)}}},[e._v("修改")]),t("el-dialog",{attrs:{title:"修改套餐",visible:e.dialogFormVisible,top:"1vh"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"addDevice",attrs:{model:e.editform,rules:e.editRules}},[t("el-form-item",{attrs:{label:"名称：","label-width":e.formLabelWidth,prop:"name"}},[t("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"套餐名称"},model:{value:e.editform.name,callback:function(t){e.$set(e.editform,"name",t)},expression:"editform.name"}})],1),t("el-form-item",{attrs:{label:"线路：","label-width":e.formLabelWidth,prop:"lid"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editform.lid,callback:function(t){e.$set(e.editform,"lid",t)},expression:"editform.lid"}},e._l(e.form.lidlist,(function(e,i){return t("el-option",{key:i,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"使用时间：","label-width":e.formLabelWidth,prop:"ut"}},[t("el-select",{staticStyle:{width:"80px",margin:"0 2px"},attrs:{placeholder:"请选择"},on:{change:e.utChangee},model:{value:e.editform.ut,callback:function(t){e.$set(e.editform,"ut",t)},expression:"editform.ut"}},[t("el-option",{attrs:{label:"月",value:"m"}},[e._v("月")]),t("el-option",{attrs:{label:"年",value:"y"}},[e._v("年")]),t("el-option",{attrs:{label:"无限制",value:"ev"}},[e._v("无限制")])],1),1==e.une?t("el-input",{staticStyle:{width:"80px",margin:"0 10px"},attrs:{autocomplete:"off",placeholder:"使用时间"},model:{value:e.editform.un,callback:function(t){e.$set(e.editform,"un",t)},expression:"editform.un"}}):e._e()],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateDevice()}}},[e._v("确 定")])],1)],1),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.delDevice(i.row)}}},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"footer-page",staticStyle:{"margin-top":"20px","text-align":"right"}},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,30,50,100,500,1e3],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.count,background:"","pager-count":5},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],o=(i("14d9"),{data(){return{text:"",un:!1,une:!1,form:{name:"",lid:"",waf:"",un:1,ut:"ev",lidlist:[]},editform:{id:"",name:"",lid:"",waf:"",un:"",ut:"ev"},deviceRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},editRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},multipleSelection:[],currentPage:1,formLabelWidth:"100px",deviceForm:{},dialogFormVisible:!1,addDialogFormVisible:!1,NodeList:[],count:0,pagesize:10,nin:0}},computed:{},watch:{},methods:{utChange(){"m"==this.form.ut||"y"==this.form.ut?this.un=!0:this.un=!1},utChangee(){"m"==this.editform.ut||"y"==this.editform.ut?this.une=!0:this.une=!1},getLidList(){this.$request({url:"/node/line/list"}).then(e=>{0==e.data.rec?this.form.lidlist=e.data.data.list:this.$message.error(e.data.msg)})},addDevice(){this.$request({url:"/product/add",params:this.form}).then(e=>{0==e.data.rec?(this.$message.success(e.data.msg),this.addDialogFormVisible=!1,this.un=!1,this.getNodeList()):(this.$message.error(e.data.msg),this.addDialogFormVisible=!1)})},delDevice(e){this.$confirm("删除套餐, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request({url:"/product/del",params:{id:e.id}}).then(e=>{0==e.data.rec?(this.$message.success("删除成功"),this.getNodeList()):this.$message.error(e.data.msg)})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},updateShow(e){this.dialogFormVisible=!0,"ev"!=e.ut?this.une=!0:this.une=!1,this.editform=e},updateDevice(e){this.$request({url:"/product/add",params:this.editform}).then(e=>{0==e.data.rec?(this.$message.success("修改成功"),this.dialogFormVisible=!1,this.une=!1,this.getNodeList()):this.$message.error(e.data.msg)})},getNodeList(){this.$request({url:"/product/list",params:{page:this.currentPage,pagesize:this.pagesize}}).then(e=>{0==e.data.rec?(this.count=e.data.data.count,this.NodeList=e.data.data.list):this.$message.error(e.data.msg)})},fun({columnIndex:e}){return 7!==e||7==e?{height:"49px",background:"#0164F6",color:"#fff"}:void 0},Tocount(e,t){this.$router.push("/node/list/count?ip="+e+"&id="+t)},handleSizeChange(e){this.pagesize=e,this.getNodeList()},handleCurrentChange(e){this.currentPage=e,this.getNodeList()}},created(){this.nin=localStorage.getItem("nin"),1==this.nin&&(this.text=""),this.getNodeList()},mounted(){}}),s=o,r=(i("a880"),i("2877")),n=Object(r["a"])(s,a,l,!1,null,"44d2738b",null);t["default"]=n.exports},"7e94":function(e,t,i){},a880:function(e,t,i){"use strict";i("7e94")}}]);