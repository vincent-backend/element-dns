(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c2a35f0a"],{7752:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pass-container"},[e("div",{staticClass:"domin-manage"},[t._v("DoT/DoH设置")]),e("el-card",[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"Dot端口",prop:"tp"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入端口号，默认为853",disabled:t.sub},model:{value:t.ruleForm.tp,callback:function(e){t.$set(t.ruleForm,"tp",e)},expression:"ruleForm.tp"}}),e("span",{staticClass:"gray"},[t._v("Dot监听端口，默认为853，设置为0或空，则不启用")])],1),e("el-form-item",{attrs:{label:"Doh端口",prop:"hp"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"输入端口号，默认为443",disabled:t.sub},model:{value:t.ruleForm.hp,callback:function(e){t.$set(t.ruleForm,"hp",e)},expression:"ruleForm.hp"}}),e("span",{staticClass:"gray"},[t._v("Doh监听端口，默认为443，设置为0或空，则不启用（如果现有服务已使用443端口，请修改为其它端口或用nginx转发）")])],1),e("el-form-item",{attrs:{label:"证书上传",prop:"cert"}},[""==t.ruleForm.cf?e("el-upload",{attrs:{"list-type":"text",limit:2,action:"","http-request":t.upload}},[e("i",{staticClass:"el-icon-plus"})]):e("div",[e("img",{staticStyle:{width:"150px",height:"150px","margin-right":"10px"},attrs:{src:t.ruleForm.cf,alt:""}}),e("img",{staticStyle:{width:"150px",height:"150px","margin-right":"10px"},attrs:{src:t.ruleForm.kf,alt:""}})]),e("span",{staticClass:"gray"},[t._v("上传.crt与.key证书文件，"),e("font",{attrs:{color:"red"}},[t._v("请上传正确的证书，否则会导致启动失败")])],1)],1),e("el-form-item",[2==t.fc?e("el-button",{attrs:{type:"primary",disabled:t.sub},on:{click:t.submit}},[t._v("提交")]):t._e()],1)],1),e("el-alert",{attrs:{title:"备注说明",type:"success",description:"DoT,DoH是一个更加安全的解析方式，对于APP应用，HTTPS能提供更稳定与安全的解析"}})],1)],1)},a=[],l=(s("14d9"),{name:"",components:{},data(){return{sub:!1,fc:0,filelist:[],ruleForm:{tp:"",hp:"",cf:"",kf:""},rules:{cert:[{required:!0,message:"请上传证书文件",trigger:"blur"}]}}},computed:{},watch:{},methods:{info(){this.$request({url:"/sys/doth/view",params:{id:0}}).then(t=>{0==t.data.rec&&(this.ruleForm=t.data.data,0==this.ruleForm.hp&&(this.ruleForm.hp=""),0==this.ruleForm.tp&&(this.ruleForm.tp=""))})},upload(t){this.filelist.push(t),this.fc++},submit(){var t=new FormData;t.append("tp",this.ruleForm.tp),t.append("hp",this.ruleForm.hp),t.append("cf",this.filelist[0].file),t.append("kf",this.filelist[1].file),this.$request({url:"/sys/doth",data:t,method:"post",headers:{"Content-Type":"multipart/form-data"}}).then(t=>{0==t.data.rec?this.$message.success("提交成功"):this.$message.error(t.data.msg)})}},created(){this.info()},mounted(){}}),i=l,o=(s("9353"),s("2877")),p=Object(o["a"])(i,r,a,!1,null,null,null);e["default"]=p.exports},9353:function(t,e,s){"use strict";s("af35")},af35:function(t,e,s){}}]);