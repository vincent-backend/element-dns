(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-220b3f3e"],{"0b3e":function(t,e,i){"use strict";i("233c")},"233c":function(t,e,i){},"26b8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"domain-container"},[e("div",{staticClass:"domin-manage"},[t._v("条件转发列表")]),e("div",{staticClass:"header-container"},[e("div",{staticClass:"header-left"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加条件转发")]),e("el-dialog",{staticClass:"dialog",attrs:{title:"添加条件转发",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.addForm,rules:t.addDominRules}},[e("el-form-item",{attrs:{label:"域名：","label-width":"65px",prop:"domain"}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"如 wddns.net"},model:{value:t.addForm.domain,callback:function(e){t.$set(t.addForm,"domain",e)},expression:"addForm.domain"}})],1),e("el-form-item",{attrs:{label:"IP：","label-width":"65px",prop:"ip"}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"DNS服务器的IP地址，如 114.114.114.114，多个用逗号分隔"},model:{value:t.addForm.ip,callback:function(e){t.$set(t.addForm,"ip",e)},expression:"addForm.ip"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{staticClass:"confirm",on:{click:t.addDomin}},[t._v("确 定")])],1)],1),e("span",{staticClass:"info"},[t._v("可指定域名使用指定的DNS服务器来解析")])],1),e("div",{staticClass:"header-right"},[e("el-input",{staticClass:"right-space",attrs:{placeholder:"ip或域名"},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}}),e("el-button",{on:{click:t.search}},[t._v("搜索")])],1)]),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"small",id:"out-table","header-cell-style":t.fun,stripe:"",data:t.domainList,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{prop:"domain",label:"域名",width:"220"}}),e("el-table-column",{attrs:{prop:"ip",label:"IP",width:"360"}}),e("el-table-column",{attrs:{prop:"state","show-overflow-tooltip":"",width:"160"},scopedSlots:t._u([{key:"default",fn:function(i){return[0==i.row.state?e("el-tag",{attrs:{type:"success"}},[t._v("正常")]):t._e(),1==i.row.state?e("el-tag",{attrs:{type:"warning"}},[t._v("暂停")]):t._e()]}}])},[e("template",{slot:"header"},[e("el-dropdown",{attrs:{placement:"bottom"}},[e("el-button",{staticClass:"head-color",staticStyle:{"font-size":"16px"},attrs:{type:"text"}},[t._v(" 状态 "),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(e){return t.stateList(0)}}},[t._v("全部")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.stateList(1)}}},[t._v("正常")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.stateList(2)}}},[t._v("暂停")])],1)],1)],1)],2),e("el-table-column",{attrs:{prop:"uid","show-overflow-tooltip":"",width:"150"},scopedSlots:t._u([1==t.gid1?{key:"header",fn:function(){return[e("el-dropdown",{attrs:{placement:"bottom"}},[e("el-button",{staticClass:"head-color",staticStyle:{"font-size":"16px"},attrs:{type:"text"}},[t._v(" 用户 "),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{staticClass:"group",attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(e){return t.selectUser(0)}}},[t._v("全部")]),t._l(t.userList,(function(i,a){return e("el-dropdown-item",{key:a,nativeOn:{click:function(e){return t.selectUser(i.id)}}},[t._v(t._s(i.user))])}))],2)],1)]},proxy:!0}:{key:"header",fn:function(){return[e("span",[t._v("用户")])]},proxy:!0},{key:"default",fn:function(i){return[0==t.uid?e("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-user"},on:{click:function(e){return t.selectUid(i.row.uid)}}}):t._e(),t.uid>0?e("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-user-solid"},on:{click:function(e){return t.selectUid(0)}}}):t._e(),t._v(t._s(i.row.uname)+" ")]}}],null,!0)}),e("el-table-column",{attrs:{label:"创建时间",width:"150",prop:"rtime",formatter:t.formatter}}),e("el-table-column",{attrs:{prop:"note",label:""},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.noteDomain(i.row)}}},[t._v(t._s(i.row.note||""))])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[e("el-dropdown",{staticClass:"more",attrs:{placement:"bottom"}},[e("el-button",{attrs:{type:"text"}},[t._v(" 更多 "),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{staticClass:"drop",attrs:{slot:"dropdown"},slot:"dropdown"},[e("div",{staticClass:"more-list"},[e("el-dropdown-item",{nativeOn:{click:function(e){return t.delDomain(i.row)}}},[t._v("删除    ")]),e("span",{staticClass:"shu"},[t._v("|")]),0==i.row.state?e("el-dropdown-item",{nativeOn:{click:function(e){return t.stopDomain(i.row)}}},[t._v("暂停")]):e("el-dropdown-item",{nativeOn:{click:function(e){return t.startDomain(i.row)}}},[t._v("启用")])],1)])],1)],1)]}}])})],1),e("div",{staticClass:"footer-page",staticStyle:{"margin-top":"20px"}},[e("div",[e("el-button",{staticClass:"footer-b anniu",nativeOn:{click:function(e){return t.startDomain.apply(null,arguments)}}},[t._v("启用")]),e("el-button",{staticClass:"footer-b anniu",nativeOn:{click:function(e){return t.stopDomain.apply(null,arguments)}}},[t._v("暂停")]),e("el-button",{staticClass:"footer-b anniu",nativeOn:{click:function(e){return t.delDomain.apply(null,arguments)}}},[t._v("删除")])],1),e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,30,50,100,500,1e3],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.count,background:"","pager-count":5},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},s=[],n=(i("ce8a"),{name:"",components:{},data(){return{gid1:"",groupvalue:"",state:"",add:!0,addr:!0,update:!0,del:!0,record:!0,count:0,indeterminate:!1,option:"",addDominRules:{ip:{required:!0,message:"请输入IP",trigger:"blur"},domain:{required:!0,message:"请输入域名",trigger:"blur"}},checked:!1,addForm:{domain:"",ip:""},dialogFormVisible:!1,userFormVisible:!1,multipleSelection:[],currentPage:1,pagesize:10,domainList:[],groupList:[1,2,3,4],userList:[],searchVal:"",gid:"",sid:"",uid:"",dt:"down",t:!1}},computed:{},watch:{},methods:{shunxu(t){this.t=!this.t,this.dt=t,this.getDominList()},selectUid(t){this.uid=t,this.currentPage=1,this.getDominList()},querySearchAsync(t,e){var i=this.userList,a=i;e(a)},createFilter(t){return e=>0===e.user.toLowerCase().indexOf(t.toLowerCase())},handleSelect(t){},selectUser(t){this.uid=t,this.currentPage=1,this.getDominList()},stateList(t){this.sid=t,this.currentPage=1,this.getDominList()},getUser(){this.$request({url:"/user/list"}).then(t=>{0==t.data.rec?this.userList=t.data.data.list:this.$message.error(t.data.msg)})},search(){this.currentPage=1,this.getDominList()},startDomain(t){var e=this.multipleSelection.map(t=>t.id);this.$confirm("是否启用","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request({url:"/domain/cfw/start",params:{id:t.id||e.toString()}}).then(t=>{0==t.data.rec?(this.$message.success("启用成功"),this.getDominList()):this.$message.warning(t.data.msg)})}).catch(t=>{})},getGroupList(){this.$request({url:"/domain/cfw/list"}).then(t=>{0==t.data.rec?this.groupList=t.data.data.list:this.$message.error(t.data.msg)})},delDomain(t){var e=this.multipleSelection.map(t=>t.id);this.$confirm("是否删除"+(t.domain||""),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request({url:"/domain/cfw/del",params:{id:t.id||e.toString()}}).then(t=>{0==t.data.rec?(this.$message.success("删除成功"),this.getDominList()):this.$message.error(t.data.msg)})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},stopDomain(t){var e=this.multipleSelection.map(t=>t.id);this.$confirm("是否暂停","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request({url:"/domain/cfw/stop",params:{id:t.id||e.toString()}}).then(t=>{0==t.data.rec?(this.$message.success("暂停成功"),this.getDominList()):this.$message.error(t.data.msg)})}).catch(()=>{this.$message({type:"info",message:"已取消暂停"})})},formatter(t,e){var i=new Date(t.rtime),a=i.getFullYear(),s=i.getMonth()+1,n=i.getDate();return a+"-"+s+"-"+n},addDomin(){this.$request({url:"/domain/cfw/add",params:this.addForm}).then(t=>{0==t.data.rec?(this.$message.success("添加成功"),this.getDominList()):this.$message.error(t.data.msg),this.dialogFormVisible=!1})},getDominList(){this.searchVal;this.$request({url:"/domain/cfw/list",params:{page:this.currentPage,pagesize:this.pagesize,search:this.searchVal,gid:this.gid,sid:this.sid,uid:this.uid,dt:this.dt}}).then(t=>{0==t.data.rec?(this.domainList=t.data.data.list,this.count=t.data.data.count):this.$message.error(t.data.msg)})},toggleAll(){this.$refs.multipleTable.toggleAllSelection()},fun({columnIndex:t}){return 8!==t?{background:"#0164F6",color:"#fff"}:8==t?{"text-align":"center",background:"#0164F6",color:"#fff","padding-right":"10px"}:void 0},toggleSelection(t){t?t.forEach(t=>{this.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange(t){this.multipleSelection=t},handleSizeChange(t){this.pagesize=t,this.getDominList()},handleCurrentChange(t){this.currentPage=t,this.getDominList()}},created(){this.gid1=localStorage.getItem("gid"),1==this.gid1&&this.getUser(),this.getDominList()},mounted(){}}),o=n,r=(i("0b3e"),i("964d"),i("2877")),l=Object(r["a"])(o,a,s,!1,null,"583e8ef7",null);e["default"]=l.exports},"6bdd":function(t,e,i){},"964d":function(t,e,i){"use strict";i("6bdd")},ce8a:function(t,e,i){"use strict";var a=i("2b0e"),s=new a["default"]({});e["a"]=s}}]);