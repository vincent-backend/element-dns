(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-266c7947"],{"18cc":function(t,e,a){"use strict";a("d659")},a024:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{},[t._m(0),e("el-card",{staticClass:"box-card"},[e("el-tabs",{ref:"tabs",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"白名单",name:"white"}},[e("div",{staticClass:"domin-one"}),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"small",id:"out-table","header-cell-style":t.fun,stripe:"",data:t.wiplist,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"80"}}),e("el-table-column",{attrs:{prop:"ip",label:"IP地址",width:"350"}}),e("el-table-column",{attrs:{prop:"note",label:"备注",width:"200"}}),e("el-table-column",{attrs:{prop:"ut",label:"有效期","show-overflow-tooltip":"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.ut?e("el-tag",{attrs:{type:"success"}},[t._v("长期")]):e("el-tag",{attrs:{type:"warning"}},[t._v(t._s(a.row.ut)+"分钟")])]}}])}),e("el-table-column",{attrs:{label:"添加时间",width:"200",prop:"rtime"}}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.delIps(a.row)}}},[t._v("删除")])],1)]}}])})],1),e("div",{staticClass:"footer-page",staticStyle:{"margin-top":"20px"}},[e("div",[e("el-button",{staticClass:"footer-b anniu",attrs:{type:"danger"},nativeOn:{click:function(e){return t.delIps.apply(null,arguments)}}},[t._v("删除")])],1),e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,30,50,100,500,1e3],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.count,background:"","pager-count":5},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),e("el-tab-pane",{attrs:{label:"黑名单",name:"black"}},[e("div",{staticClass:"domin-one"}),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"small",id:"out-table","header-cell-style":t.fun,stripe:"",data:t.biplist,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"80"}}),e("el-table-column",{attrs:{prop:"ip",label:"IP地址",width:"350"}}),e("el-table-column",{attrs:{prop:"note",label:"备注",width:"200"}}),e("el-table-column",{attrs:{prop:"ut",label:"有效期","show-overflow-tooltip":"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.ut?e("el-tag",{attrs:{type:"success"}},[t._v("长期")]):e("el-tag",{attrs:{type:"warning"}},[t._v(t._s(a.row.ut)+"分钟")])]}}])}),e("el-table-column",{attrs:{label:"添加时间",width:"200",prop:"rtime"}}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.delIps(a.row)}}},[t._v("删除")])],1)]}}])})],1),e("div",{staticClass:"footer-page",staticStyle:{"margin-top":"20px"}},[e("div",[e("el-button",{staticClass:"footer-b anniu",attrs:{type:"danger"},nativeOn:{click:function(e){return t.delIps.apply(null,arguments)}}},[t._v("删除")])],1),e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,30,50,100,500,1e3],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.count,background:"","pager-count":5},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),e("el-tab-pane",{attrs:{label:"添加",name:"add"}},[e("div",{staticClass:"domin-one"}),e("div",{staticClass:"domin-list bottom"},[e("span",{staticStyle:{width:"100px",display:"inline-block"}},[t._v("名单类型")]),e("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"名单类型",clearable:""},model:{value:t.form.pt,callback:function(e){t.$set(t.form,"pt",e)},expression:"form.pt"}},[e("el-option",{attrs:{label:"白名单",value:2}},[t._v("白名单")]),e("el-option",{attrs:{label:"黑名单",value:1}},[t._v("黑名单")])],1),e("span",{staticClass:"gray"},[t._v("白名单或黑名单")])],1),e("div",{staticClass:"domin-list bottom"},[e("span",{staticStyle:{width:"100px",display:"inline-block"}},[t._v("IP列表：")]),e("el-input",{staticClass:"shuru",staticStyle:{height:"100%",width:"300px"},attrs:{type:"textarea",rows:6,placeholder:"IP地址，每个一行",clearable:""},model:{value:t.form.ips,callback:function(e){t.$set(t.form,"ips",e)},expression:"form.ips"}}),e("span",{staticClass:"gray"},[t._v("IP地址，每个一行，支持网段，如192.168.0.0/24")])],1),e("div",{staticClass:"domin-list bottom"},[e("span",{staticStyle:{width:"100px",display:"inline-block"}},[t._v("有效期")]),e("el-input",{staticClass:"shuru",staticStyle:{height:"100%",width:"300px"},attrs:{placeholder:"有效期，默认为空或0",clearable:""},model:{value:t.form.ut,callback:function(e){t.$set(t.form,"ut",e)},expression:"form.ut"}}),e("span",{staticClass:"gray"},[t._v("有效时间或过期时间,单位分钟，默认为空或0，一直有效不过期；如有设置则到期后会自动解除与删除")])],1),e("div",{staticClass:"domin-list bottom"},[e("span",{staticStyle:{width:"100px",display:"inline-block"}},[t._v("备注")]),e("el-input",{staticClass:"shuru",staticStyle:{height:"100%",width:"300px"},attrs:{placeholder:"备注",clearable:""},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}}),e("span",{staticClass:"gray"},[t._v("备注")])],1),e("div",{staticClass:"domin-list bottom"},[e("span",{staticStyle:{width:"130px",display:"inline-block"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.ipsAdd}},[t._v("保存")])],1)])],1)],1)],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"control"},[e("span",{staticStyle:{margin:"0 10px"}},[t._v("IP名单")])])}],l={name:"",components:{},data(){return{form:{pt:"",ips:"",ut:"",note:""},pt:2,groupList:[],addDialogFormVisible:!1,sipEdit:{},multipleSelection:[],currentPage:1,pagesize:10,count:0,activeName:"white",formLabelWidth:"80px",wiplist:[],biplist:[],filelist:[]}},computed:{},watch:{},methods:{submit(){},ipsAdd(){this.form.ips=this.form.ips.replace(/\s+/g,","),this.$request({url:"/node/ips/add",params:this.form}).then(t=>{0==t.data.rec?(this.$message.success(t.data.msg),2==this.form.pt?(this.activeName="white",this.pt=2):(this.pt=1,this.activeName="black"),this.getIpList()):this.$message.error(t.data.msg)})},getIpList(){this.searchVal;this.$request({url:"/node/ips/list",params:{page:this.currentPage,pagesize:this.pagesize,search:this.searchVal,pt:this.pt}}).then(t=>{0==t.data.rec?(2==this.pt?this.wiplist=t.data.data.list:this.biplist=t.data.data.list,this.count=t.data.data.count):this.$message.error(t.data.msg)})},delIps(t){var e=this.multipleSelection.map(t=>t.id);this.$confirm("删除源IP, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request({url:"/node/ips/del",params:{id:t.id||e.toString()}}).then(t=>{0==t.data.rec?(this.$message.success("删除成功"),this.getIpList()):this.$message.error(t.data.msg)})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},fun({columnIndex:t}){return 8!==t?{background:"#0164F6",color:"#fff"}:8==t?{"text-align":"center",background:"#0164F6",color:"#fff","padding-right":"10px"}:void 0},toggleAll(){this.$refs.multipleTable.toggleAllSelection()},toggleSelection(t){t?t.forEach(t=>{this.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange(t){this.multipleSelection=t},handleClick(t,e){"white"==t.name?(this.pt=2,this.currentPage=1,this.getIpList()):(this.pt=1,this.currentPage=1,this.getIpList())},handleSizeChange(t){this.pagesize=t,this.getIpList()},handleCurrentChange(t){this.currentPage=t,this.getIpList()}},beforeRouteEnter(t,e,a){"white"==t.query.tab?a(t=>{t.activeName="white"}):"black"==t.query.tab?a(t=>{t.activeName="black"}):a(t=>{t.activeName="white"})},created(){this.getIpList()},mounted(){}},n=l,o=(a("18cc"),a("2877")),r=Object(o["a"])(n,s,i,!1,null,"1861d744",null);e["default"]=r.exports},d659:function(t,e,a){}}]);