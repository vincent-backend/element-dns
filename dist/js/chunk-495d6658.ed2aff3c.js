(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-495d6658"],{"28cb":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pass-container"},[e("div",{staticClass:"domin-manage"},[t._v("HttpDNS设置")]),e("el-card",[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"160px"}},[e("el-form-item",{attrs:{label:"启用HttpDNS",prop:"hdis"}},[e("el-switch",{staticStyle:{width:"160px",margin:"0 20px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.ruleForm.hdis,callback:function(e){t.$set(t.ruleForm,"hdis",e)},expression:"ruleForm.hdis"}}),e("span",{staticClass:"gray"},[t._v("启用HttpDNS功能")])],1),e("el-form-item",{attrs:{label:"使用端口",prop:"hdp"}},[e("el-input",{staticStyle:{width:"160px",margin:"0 20px"},attrs:{autocomplete:"off",placeholder:"输入自定义端口"},model:{value:t.ruleForm.hdp,callback:function(e){t.$set(t.ruleForm,"hdp",e)},expression:"ruleForm.hdp"}}),e("span",{staticClass:"gray"},[t._v("使用端口，即监听端口，默认为80，启用HTTPS默认为443，可自定义（需开放防火墙的相应端口访问）")])],1),e("el-form-item",{attrs:{label:"启用HTTPS",prop:"hdhis"}},[e("el-switch",{staticStyle:{width:"160px",margin:"0 20px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.ruleForm.hdhis,callback:function(e){t.$set(t.ruleForm,"hdhis",e)},expression:"ruleForm.hdhis"}}),e("span",{staticClass:"gray"},[t._v("启用https安全访问")])],1),1==t.ruleForm.hdhis?e("el-form-item",{attrs:{label:"证书上传",prop:"cert"}},[""==t.ruleForm.cf?e("el-upload",{attrs:{"list-type":"text",limit:2,action:"","http-request":t.upload}},[e("i",{staticClass:"el-icon-plus"})]):e("div",[e("img",{staticStyle:{width:"150px",height:"150px","margin-right":"10px"},attrs:{src:t.ruleForm.cf,alt:""}}),e("img",{staticStyle:{width:"150px",height:"150px","margin-right":"10px"},attrs:{src:t.ruleForm.kf,alt:""}})]),e("span",{staticClass:"gray"},[t._v("上传.crt与.key证书文件，"),e("font",{attrs:{color:"red"}},[t._v("如要启用HTTPS访问，请先上传正确的证书")])],1)],1):t._e(),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1),e("el-alert",{attrs:{title:"备注说明",type:"success",description:"HTTPDNS使用HTTP协议进行域名解析，代替现有基于UDP的DNS协议，域名解析请求直接发送到HTTPDNS服务器，从而绕过运营商的Local DNS，能够避免Local DNS造成的域名劫持或调度不精准问题。"}})],1)],1)},i=[],a=(s("14d9"),{name:"",components:{},data(){return{filelist:[],ruleForm:{hdis:!1,hdp:"",hdhis:!1,cf:"",kf:""},rules:{cert:[{required:!1,message:"请上传证书文件",trigger:"blur"}]}}},computed:{},watch:{},methods:{info(){this.$request({url:"/sys/httpdns/view",params:{}}).then(t=>{0==t.data.rec&&(this.ruleForm=t.data.data,1==this.ruleForm.hdhis?80==this.ruleForm.hdp&&(this.ruleForm.hdp=443):443==this.ruleForm.hdp&&(this.ruleForm.hdp=80))})},upload(t){this.filelist.push(t),this.fc++},submit(){var t=new FormData;t.append("hdis",this.ruleForm.hdis),t.append("hdp",this.ruleForm.hdp),t.append("hdhis",this.ruleForm.hdhis),1==this.ruleForm.hdhis&&2==this.filelist.length&&(t.append("cf",this.filelist[0].file),t.append("kf",this.filelist[1].file)),this.$request({url:"/sys/httpdns",data:t,method:"post",headers:{"Content-Type":"multipart/form-data"}}).then(t=>{0==t.data.rec?this.$message.success(t.data.msg):this.$message.error(t.data.msg)})}},created(){this.info()},mounted(){}}),l=a,o=(s("b2c3"),s("2877")),h=Object(o["a"])(l,r,i,!1,null,null,null);e["default"]=h.exports},"467e":function(t,e,s){},b2c3:function(t,e,s){"use strict";s("467e")}}]);