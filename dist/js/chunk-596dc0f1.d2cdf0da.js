(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-596dc0f1"],{"373e":function(t,e,i){"use strict";i("c8c1")},a2fa:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"domain-container"},[e("div",{staticClass:"domin-manage"},[t._v("api设置")]),e("div",{staticClass:"header-container"},[e("div",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("创建秘钥")])],1)]),e("el-dialog",{attrs:{title:"创建秘钥",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{"label-position":"top"}},[e("el-form-item",{attrs:{label:"秘钥名称","label-width":t.formLabelWidth}},[e("el-input",{attrs:{placeholder:"请为创建的秘钥取一个名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addapi}},[t._v("确 定")])],1)],1),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"small",id:"out-table","header-cell-style":t.fun,stripe:"",data:t.apiList,"tooltip-effect":"dark"}},[e("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),e("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":"",width:"50",label:"ID"}}),e("el-table-column",{attrs:{prop:"key","show-overflow-tooltip":"",width:"360",label:"Token"}}),e("el-table-column",{attrs:{prop:"ip","show-overflow-tooltip":"",width:"400px",label:"IP白名单"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticStyle:{display:"flex","align-items":"center"}},[i.row.ip?e("span",{staticStyle:{"margin-right":"10px","line-height":"40px","max-width":"280px",overflow:"hidden",display:"inline-block"}},[t._v(" "+t._s(i.row.ip)+" ")]):t._e(),e("el-button",{staticClass:"setting",attrs:{type:"text"},on:{click:function(e){return t.set(i.row,"ip")}}},[t._v("设置")])],1)]}}])}),e("el-table-column",{attrs:{prop:"rtime",label:"创建时间","show-overflow-tooltip":"",width:"200"}}),e("el-table-column",{attrs:{prop:"note",label:"操作","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(i){return[e("i",{staticClass:"el-icon-delete-solid",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.del(i.row)}}})]}}])})],1),"ip"==t.show?e("el-dialog",{attrs:{title:"IP白名单设置",visible:t.FormVisible},on:{"update:visible":function(e){t.FormVisible=e}}},[e("div",{staticStyle:{padding:"20px",background:"#f0f9eb","margin-bottom":"20px"}},[t._v("IP白名单的功能可以指定IP地址进行API调用，以保证秘钥安全。")]),e("el-form",[e("el-form-item",{attrs:{label:"允许访问的IP","label-width":t.formLabelWidth}},[e("el-input",{staticClass:"ip",attrs:{placeholder:"请输入ip地址，每行一个，如1.2.3.4",type:"textarea"},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.FormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editapi()}}},[t._v("确 定")])],1)],1):t._e(),"url"==t.show?e("el-dialog",{attrs:{title:"url设置",visible:t.FormVisible1},on:{"update:visible":function(e){t.FormVisible1=e}}},[e("div",{staticStyle:{padding:"20px",background:"#f0f9eb","margin-bottom":"20px"}},[t._v("url回调")]),e("el-form",[e("el-form-item",{attrs:{label:"url回调","label-width":t.formLabelWidth}},[e("el-input",{staticClass:"ip",attrs:{placeholder:"请输入url地址"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.FormVisible1=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editapi()}}},[t._v("确 定")])],1)],1):t._e(),e("div",{staticClass:"footer-page",staticStyle:{"margin-top":"20px"}},[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,30,50,100,500,1e3],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.count,background:"","pager-count":5},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._m(0),e("el-alert",{attrs:{title:"备注说明",type:"success"}},[e("template",{slot:"title"},[e("div",[t._v("备注说明:")]),e("div",[t._v("1、此API设置为使用API接口时，创建相应的ID与密钥用于连接API接口")]),e("div",[t._v("2、通过API接口，可以创建与管理域名或记录，结合自身的业务系统或应用需求开发控制")]),e("div")])],2)],1)},l=[function(){var t=this,e=t._self._c;return e("div",[e("br")])}],s={name:"",components:{},data(){return{currentPage:1,pagesize:10,show:"ip",dialogTableVisible:!1,dialogFormVisible:!1,FormVisible:!1,count:0,FormVisible1:!1,name:"",formLabelWidth:"100px",apiList:[],data:{},ip:"",url:""}},computed:{},watch:{},methods:{del(t){this.$request({url:"/user/api/del",params:{id:t.id}}).then(t=>{0==t.data.rec?(this.getapiList(),this.$message.success(t.data.msg)):this.$message.error(t.data.msg)})},handleSizeChange(t){this.pagesize=t,this.getapiList()},handleCurrentChange(t){this.currentPage=t,this.getapiList()},set(t,e){this.data=t,this.who=e,"ip"==e?(this.show="ip",this.FormVisible=!0,this.ip=t.ip.replace(/,/g,"\n")):(this.show="url",this.FormVisible1=!0,this.url=t.url)},editapi(){if("ip"==this.who)var t=this.ip.replace(/\s+/g,",");if("url"==this.who)var e=this.url.replace(/\s+/g,",");this.$request({url:"/user/api/edit",params:{id:this.data.id,ip:t,url:e}}).then(t=>{0==t.data.rec?(this.$message.success(t.data.msg),this.getapiList(),this.FormVisible=!1,this.FormVisible1=!1):this.$message.error(t.data.msg)})},addapi(){this.$request({url:"/user/api/add",params:{name:this.name}}).then(t=>{0==t.data.rec?(this.domainList=t.data.data.list,this.getapiList(),this.dialogFormVisible=!1):this.$message.error(t.data.msg)})},getapiList(){this.$request({url:"/user/api/list",params:{page:this.currentPage,pagesize:this.pagesize}}).then(t=>{0==t.data.rec?(this.apiList=t.data.data.list,this.count=t.data.data.count):this.$message.error(t.data.msg)})},toggleAll(){this.$refs.multipleTable.toggleAllSelection()},fun({columnIndex:t}){return 8!==t?{background:"#0164F6",color:"#fff"}:8==t?{"text-align":"center",background:"#0164F6",color:"#fff","padding-right":"10px"}:void 0}},created(){this.getapiList()},mounted(){}},o=s,r=(i("b495"),i("373e"),i("2877")),n=Object(r["a"])(o,a,l,!1,null,"9a39ef20",null);e["default"]=n.exports},b495:function(t,e,i){"use strict";i("f68d")},c8c1:function(t,e,i){},f68d:function(t,e,i){}}]);