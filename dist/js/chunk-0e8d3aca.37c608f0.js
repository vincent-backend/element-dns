(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e8d3aca"],{"864b":function(t,e,a){"use strict";a("e3e3")},"9ed6":function(t,e,a){"use strict";a.r(e);a("14d9");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[e("el-form",{ref:"loginForm",attrs:{model:t.loginForm,rules:t.rules,"show-message":!1}},[e("div",{staticClass:"login-title"},[t._v("用户登录")]),e("el-form-item",{attrs:{prop:"name"}},[e("el-input",{attrs:{placeholder:"手机号或邮箱",clearable:""},model:{value:t.loginForm.name,callback:function(e){t.$set(t.loginForm,"name",e)},expression:"loginForm.name"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{type:"password",placeholder:"密码",clearable:"","show-password":""},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),e("el-form-item",[e("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.onLogin}},[t._v("登录")])],1),e("el-form-item",[e("el-button",{staticStyle:{"background-color":"#f1f1f1",color:"#000","border-color":"#f1f1f1",width:"48%"},on:{click:function(e){return t.$router.push("/register")}}},[t._v("注册")]),e("el-button",{staticStyle:{"background-color":"#f1f1f1",color:"#000","border-color":"#f1f1f1",width:"48%"},on:{click:function(e){return t.$router.push("/findpw")}}},[t._v("忘记密码")])],1)],1)],1)},r=[],o={name:"",components:{},data(){return{src:"",loginForm:{name:"",password:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},computed:{},watch:{},methods:{update(){this.$request({url:"/user/captcha"}).then(t=>{0==t.data.rec?(this.src=t.data.data,this.captcha_id=t.data.data):this.$message.error(t.data.msg)})},onLogin(){var t=this.src.split("/")[this.src.split("/").length-1];this.loginForm.captcha_id=t.split(".")[0],this.$refs.loginForm.validate(async(t,e)=>{if(t){const t=await this.$request({url:"/login",data:this.loginForm,method:"post"});t.data.token,this.$message({message:"登陆成功",type:"success"}),window.sessionStorage.setItem("token",t.data.token),window.localStorage.setItem("user",this.loginForm.name),window.sessionStorage.setItem("login_time",(new Date).getTime()),this.$router.push("/panel")}else for(var a in e)return this.$message.error(e[a][0].message),a})}},created(){this.$request({url:"/user/captcha"}).then(t=>{0==t.data.rec?(this.src=t.data.data,this.captcha_id=t.data.data):this.$message.error(t.data.msg)})},mounted(){this.$request({url:"/user/info"}).then(t=>{3!=t.data.rec?0==t.data.rec?(window.localStorage.setItem("win",t.data.data.title),window.localStorage.setItem("ttl",t.data.data.ttl),window.localStorage.setItem("nin",t.data.data.nin),window.localStorage.setItem("htis",t.data.data.htis)):this.$message.error(t.data.msg):this.$router.push("/notfound")})}},i=o,n=(a("864b"),a("2877")),l=Object(n["a"])(i,s,r,!1,null,null,null);e["default"]=l.exports},e3e3:function(t,e,a){}}]);